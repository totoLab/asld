# [USAGE]
# asld [FLAG + OPTION] [SOURCE] [OUTPUT]
#
# [FLAGS] (optional)
# -l: takes list of options (filenames format: basename.o)  
#
# [SOURCE]
# list of file sources, accepted file extensions are: [nasm, asm, s].
#
# [OUTPUT] (optional)
# can be specified, otherwise it's the basename of the 1st source

nasm -f elf32 $1 &&
basename="$(echo "$1" | cut -f 1 -d '.')" &&

if [ $# -eq 1 ]; then
    output=$basename
else
    output=$2
fi

ld -m elf_i386 "${basename}.o" -o $output